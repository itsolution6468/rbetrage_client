import { useState, useEffect } from 'react';
import Cookies from 'js-cookie';
import { Box, Typography, Button } from '@mui/material';

function CookieConsent() {
	const [visible, setVisible] = useState(false);

	useEffect(() => {
		const consent = Cookies.get('rbetrage-cookie-consent');
		if (!consent) {
			setVisible(true);
		}
	}, []);

	const handleAccept = () => {
		Cookies.set('rbetrage-cookie-consent', 'accepted', { expires: 365 });
		setVisible(false);
	};

	if (!visible) return null;

	return (
		<Box
			sx={{
				position: 'fixed',
				display: 'flex',
				alignItems: 'center',
				bottom: '0',
				width: '100%',
				padding: {
					xs: '10px',
					sm: '10px 50px 15px',
				},
				backgroundColor: '#193D34',
				boxShadow: '0px 0px 15px rgba(0, 0, 0, 0.2)',
				zIndex: 10000,
				borderBottom: '10px solid #00AB55',
			}}
		>
			<Typography
				sx={{
					display: 'flex',
					alignItems: 'center',
					fontWeight: '400',
					gap: '10px',
					color: '#fff',
					fontSize: '15px',
					justifyContent: 'flex-start',
				}}
			>
				<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path
						d="M14.7598 3.75976C10.8589 3.39216 4.72626 5.68682 1.96559 11.7449C-0.478107 17.1018 0.822176 23.6506 5.15807 27.5905C9.71554 31.7313 16.1878 32.4308 21.4569 29.354C25.7508 26.8456 28.9934 20.9721 28.1427 17.2168C26.5287 17.7577 25.2898 17.1714 24.2289 15.9521C24.0769 15.7772 23.6806 15.667 23.451 15.7286C21.2515 16.3294 19.2995 15.918 17.6773 14.3019C16.0552 12.6858 15.6105 10.7215 16.2574 8.53368C16.3787 8.12236 16.3091 7.92642 15.9905 7.66408C14.7727 6.66006 14.2132 5.41314 14.7582 3.75976H14.7598Z"
						fill="#B0D46D"
					/>
					<path
						d="M17.229 0.116898C17.3707 0.139091 17.7736 0.200549 17.9324 0.490765C18.0314 0.670016 18.016 0.914139 17.8948 1.23508C17.1368 3.22563 17.386 4.04506 19.1804 5.18032C19.8325 5.59345 19.6123 6.04585 19.3938 6.5597C18.5709 8.50927 19.0745 10.7047 20.6964 11.9748C22.1424 13.1066 23.7694 13.3627 25.4647 12.6201C26.2159 12.2906 26.612 12.3948 27.0098 13.1442C27.7149 14.4758 29.1797 14.8821 30.5762 14.2504C31.505 13.8288 31.8259 13.9551 31.9267 14.9623C32.2476 18.1496 31.5033 21.1405 29.9258 23.8873C28.6027 26.192 26.9278 28.0238 24.9235 29.369C24.1143 29.9119 21.7003 31.4159 18.2721 31.8683C13.1452 32.5443 7.29452 30.6647 3.66491 26.3115C1.24575 23.4059 0.503094 20.2255 0.276031 19.0168C-0.0790766 17.1304 -0.0346882 15.4881 0.0950625 14.2948C0.588457 9.73842 2.88129 6.73554 3.39005 6.09365C5.72727 3.14027 8.40594 1.96404 10.569 1.01657C10.569 1.01657 13.8145 -0.407198 17.2307 0.115191L17.229 0.116898ZM16.2644 1.58505C12.1465 1.19753 5.67263 3.61657 2.75837 10.003C0.180425 15.6503 1.55305 22.554 6.13018 26.7058C10.9412 31.071 17.7736 31.8085 23.3358 28.5649C27.8685 25.9205 31.2916 19.7287 30.3936 15.7698C28.6897 16.34 27.382 15.722 26.262 14.4365C26.1015 14.2521 25.6833 14.1361 25.4408 14.2009C23.119 14.8343 21.0583 14.4007 19.346 12.6969C17.6336 10.9932 17.1641 8.9224 17.847 6.61604C17.975 6.18242 17.9016 5.97585 17.5653 5.69929C16.2798 4.64086 15.689 3.32635 16.2644 1.58334V1.58505Z"
						fill="#B0D46D"
					/>
					<path
						d="M12.5752 11.6318C12.1894 11.6915 11.5867 11.7666 11.1975 11.7905C10.7399 11.8179 10.4531 11.5823 10.407 11.1316C10.3678 10.7492 10.3217 10.2336 10.3148 9.84438C10.3063 9.38687 10.5351 9.12909 11.0063 9.03519C11.4075 8.95496 12.1023 8.83716 12.5121 8.81155C12.9935 8.78253 13.2701 9.03007 13.2923 9.49271C13.3111 9.88706 13.2718 10.4555 13.2718 10.8465C13.2701 11.3057 13.0294 11.5635 12.5769 11.6335L12.5752 11.6318Z"
						fill="#193D34"
					/>
					<path
						d="M8.38219 16.9359C7.81026 17.1613 7.042 17.4617 6.43422 17.6461C5.72059 17.8629 5.30232 17.6239 5.00526 16.9188C4.75258 16.3179 4.4726 15.4319 4.38723 14.7747C4.28651 14.003 4.53406 13.595 5.27842 13.3645C5.9118 13.1682 6.88835 13.076 7.52174 13.0146C8.26439 12.9412 8.64852 13.158 8.83119 13.8323C8.98826 14.4059 9.0924 14.9966 9.19142 15.5753C9.30752 16.2548 9.05314 16.673 8.38219 16.9359Z"
						fill="#193D34"
					/>
					<path
						d="M18.262 26.1596C17.7533 25.9155 17.1814 25.627 16.7665 25.2531C16.2782 24.8144 16.1621 24.3552 16.4421 23.7406C16.6794 23.2165 17.1438 22.6839 17.5552 22.2588C18.0384 21.7603 18.5284 21.6647 19.1362 22.0096C19.6534 22.3032 20.1793 22.7436 20.5822 23.1465C21.0534 23.6194 21.1456 24.0667 20.7973 24.6095C20.5002 25.0722 20.1315 25.4461 19.761 25.8541C19.3257 26.3321 18.8596 26.443 18.262 26.1579V26.1596Z"
						fill="#193D34"
					/>
					<path
						d="M8.74585 24.2528C8.36172 24.2254 7.89393 24.2135 7.49614 24.1981C7.02836 24.1793 6.8491 23.9113 6.81495 23.4214C6.78593 23.0048 6.82349 22.3663 6.9447 21.9481C7.08811 21.4581 7.34761 21.2806 7.85466 21.3421C8.2866 21.3933 8.91487 21.6135 9.30412 21.7552C9.76166 21.9208 9.93751 22.1547 9.86068 22.5934C9.7941 22.9673 9.67288 23.3224 9.57728 23.686C9.4646 24.1111 9.19656 24.2852 8.74585 24.2545V24.2528Z"
						fill="#193D34"
					/>
					<path
						d="M14.4241 18.5389C14.0537 18.4689 13.5893 18.288 13.3059 18.1036C12.9713 17.8868 12.8125 17.6358 12.8706 17.2807C12.9201 16.9786 12.9371 16.8352 13.0362 16.5074C13.1522 16.1233 13.4271 15.9662 13.8932 15.9833C14.291 15.997 14.8714 16.0362 15.247 16.1608C15.6892 16.3077 15.8531 16.5706 15.7814 17.0076C15.7199 17.378 15.5117 17.7246 15.3461 18.0626C15.1514 18.4587 14.8595 18.6209 14.4241 18.5389Z"
						fill="#193D34"
					/>
				</svg>
				We use cookies to ensure you get the best experience on our website.
			</Typography>
			<Button
				onClick={handleAccept}
				sx={{
					display: 'flex',
					padding: '5px 20px',
					border: 'none',
					color: '#193D34',
					backgroundColor: '#B0D46D !important',
					boxShadow: 'none',
					'&:hover': {
						backgroundColor: '#007B55',
					},
					borderRadius: '10px',
					cursor: 'pointer',
					marginLeft: 'auto',
					marginRight: '0px',
				}}
				variant="contained"
			>
				Accept
			</Button>
		</Box>
	);
}

export default CookieConsent;
